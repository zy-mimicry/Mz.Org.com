#+TITLE: Gentoo Linux

** D: 区分常用 _分区关键词_ 的概念

    : 常用的关键词: MBR, GPT, GURB, LILO, BIOS, UEFI, fdisk, parted

*** T: 常用分区的概念有很多,如果清晰之后,就不会迷惑.

    - MBR,GPT :: 这是两种分区技术,也是分区布局技术,通过标签决定,有一些差别,但是GPT更先进.也是常说的分区表管理.
    - UEFI,BIOS :: 这是与计算机硬件相关的系统启动引导接口,是嵌入在计算机固件中的,如果要查看,请在开机启动时进入启动项来查看.
      - UEFI需要一个额外的配置分区,并且完成几乎不加限制的分区功能.BIOS一般关联MBR技术,UEFI关联GPT技术.
    - GURB,FIFO :: 这是bootloader,就是开机启动装载程序,多个操作系统时是必要的,当然,当系统出现问题的时候,可以进入特殊模式修复系统.
    - fdisk,parted :: 这是分区管理工具,没什么好说的,套件一般都会集成,使用方法查看help.
 
** D: 区分 _分区_ 与 _格式化文件系统_

   : 通常人们容易混淆分区和文件系统的概念,这里我们理清思路.

*** T: 一个硬件磁盘上完成分块规划就是分区,对分好的区块进行格式化指定格式的文件系统.

    1. 分区后不一定要格式文件系统,这在嵌入式中比比皆是.
    2. 文件系统是依赖分区来存在的,没有分区,就没有文件系统.当然有人说虚拟文件系统,网络文件系统他们不需要,那如果不在内存上分区,如果实现呢?
    3. 一个分区可能嵌套分区,就像虚拟化技术一样,可以使用虚拟机完成配置操作系统.

** D: 磁盘分区工具parted的使用(虽然看help就可以)

   : man parted 和 parted程序中的help是很有帮助的.

*** T: 这里还是简单记录关键过程,以便后续好查找.

    1. 首先分区时,使用对齐方式是有助与系统优化的.
       + sudo parted -a optimal /dev/sda
    2. 查看分区信息
       + print
    3. 删除不要的分区
       + rm <N> :: 需要知道的是parted工具是立即执行的,要小心使用
    4. 设置分区布局格式标签(就是这一块硬盘的分区布局结构)
       + mklabel [gpt] | [msdos]
    5. 创建分区
       + 设定分区单位 :: unit mib -- Mb是常用的
       + 划定分区范围 :: mkpart primary 1 3
       + 如果有必要,给分区起名字 :: name 1 grub
       + 设置引导程序的标志位 :: set 1 bios_grub on
       + 检查一下 :: print
    6. 退出 quit
    7. 查看分区是否完成 :: ls -l /dev/sda*
       + 标号是对应的,应该能看懂.

** D: 文件系统格式化工具的使用

   : 这里我们使用mkfs.ext2工具,简称mke2fs

*** T: 文件系统格式化工具的使用流程

    特定文件系统类型查找相关文档,或者去gentoo官网获取.

    按道理来说,应该是每个格式的文件系统都有自己的格式化工具. 命名规则[mkfs.namefs],具体查看gentoo文档.

    需要注意的内容:
    1. 当分区小于8G时候,创建文件系统必须保留足够的inode.
    2. 常用mkfs.namefs完成节点数目的控制.

    激活swap分区
    1. mkswap /dev/sda3
    2. swapon /dev/sda3
    3. 注意的是,当我们编译代码不够内存的时候,可能需要扩大swap完成编译,这时候可以使用dd指令和上面两条指令完成扩展swap分区.
       
    分区已经格式化好文件系统后,需要手动挂在上,使用mount完成,挂在目录必须存在,且挂在后的权限有时候需要手动修改.
